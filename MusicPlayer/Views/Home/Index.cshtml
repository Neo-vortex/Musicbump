@{
    ViewData["Title"] = "Home Page";
}
@using Microsoft.AspNetCore.Identity
@using MusicPlayer.Services.UserMusicManager
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager
@inject UserMusicService UserMusicService
<div class="text-center">
    <h1 class="display-4">Welcome to your very bare-bone music player.</h1>
    <h1 class="display-4">And guess what!? we have playlists!</h1>
    @if (SignInManager.IsSignedIn(User))
    {
         var _user_creation_result =   await UserMusicService.CreateNewSongUser(new User() {Email = User.Identity?.Name});
        if (_user_creation_result > 0)
        {
            <p>Cool, this probably your first time logging in! welcome dude.</p>
        }
        else
        {
            <p  style="color:green;" >welcome back @User.Identity?.Name</p>
        }
 
    }
    else
    {
        <p  style="color:red;" >sad news: you are not logged in yet!</p>
    }
</div>